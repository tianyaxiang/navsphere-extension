<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>测试图标功能 - NavSphere扩展</title>
    <meta name="description" content="这是一个测试页面，用于验证NavSphere扩展的自定义图标功能">
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/react/react-original.svg">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            line-height: 1.6;
        }
        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
        }
        .feature-box {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }
        .icon-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }
        .icon-example {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 4px;
        }
        .icon-example img {
            width: 16px;
            height: 16px;
        }
        .code {
            background: #f1f3f4;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>🎯 NavSphere 扩展图标功能测试</h1>
        <p>测试自定义图标输入框功能</p>
    </div>

    <div class="feature-box">
        <h2>📋 测试说明</h2>
        <p>这个页面用于测试 NavSphere 扩展的新增图标功能：</p>
        <ul>
            <li>✅ 添加站点时可以输入自定义图标地址</li>
            <li>✅ 支持图标预览功能</li>
            <li>✅ 自动获取页面默认图标</li>
            <li>✅ 图标地址验证和错误处理</li>
        </ul>
    </div>

    <div class="feature-box">
        <h2>🔧 如何测试</h2>
        <ol>
            <li>确保已安装并配置 NavSphere 扩展</li>
            <li>在此页面上右键选择"添加到 NavSphere"或使用快捷键 <span class="code">Ctrl+Shift+A</span></li>
            <li>观察弹出窗口中的"图标地址"和"描述"字段是否自动填充</li>
            <li>等待API加载完成（会显示加载动画）</li>
            <li>检查API获取的描述和图标是否更新到输入框中</li>
            <li>可以手动编辑描述和图标地址</li>
            <li>提交后检查 NavSphere 中是否正确显示</li>
        </ol>
    </div>

    <div class="feature-box">
        <h2>🎨 测试图标示例</h2>
        <p>你可以使用以下图标URL进行测试：</p>
        <div class="icon-examples">
            <div class="icon-example">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/react/react-original.svg" alt="React">
                <span>React 图标</span>
            </div>
            <div class="icon-example">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg" alt="TypeScript">
                <span>TypeScript 图标</span>
            </div>
            <div class="icon-example">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg" alt="JavaScript">
                <span>JavaScript 图标</span>
            </div>
            <div class="icon-example">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nodejs/nodejs-original.svg" alt="Node.js">
                <span>Node.js 图标</span>
            </div>
            <div class="icon-example">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg" alt="GitHub">
                <span>GitHub 图标</span>
            </div>
            <div class="icon-example">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vscode/vscode-original.svg" alt="VS Code">
                <span>VS Code 图标</span>
            </div>
        </div>
    </div>

    <div class="feature-box">
        <h2>📝 测试用图标URL</h2>
        <p>复制以下URL到图标输入框中测试：</p>
        <div style="background: white; padding: 1rem; border-radius: 4px; margin: 0.5rem 0;">
            <div class="code">https://cdn.jsdelivr.net/gh/devicons/devicon/icons/react/react-original.svg</div>
        </div>
        <div style="background: white; padding: 1rem; border-radius: 4px; margin: 0.5rem 0;">
            <div class="code">https://cdn.jsdelivr.net/gh/devicons/devicon/icons/typescript/typescript-original.svg</div>
        </div>
        <div style="background: white; padding: 1rem; border-radius: 4px; margin: 0.5rem 0;">
            <div class="code">https://github.com/favicon.ico</div>
        </div>
    </div>

    <div class="feature-box">
        <h2>✨ 功能特性</h2>
        <ul>
            <li><strong>智能默认值：</strong>自动获取页面的favicon作为默认图标</li>
            <li><strong>API增强：</strong>通过fetchWebsiteMetadata API获取更准确的描述和图标</li>
            <li><strong>实时预览：</strong>输入图标URL后立即显示预览</li>
            <li><strong>可编辑字段：</strong>API获取后用户仍可手动编辑</li>
            <li><strong>必填验证：</strong>图标地址为必填字段，确保每个书签都有图标</li>
            <li><strong>加载状态：</strong>显示API获取过程的加载动画</li>
            <li><strong>错误处理：</strong>API失败时保持默认值，不影响正常使用</li>
        </ul>
    </div>

    <script>
        // 添加一些交互功能
        document.addEventListener('DOMContentLoaded', function() {
            console.log('NavSphere 扩展图标功能测试页面已加载');
            console.log('页面图标:', document.querySelector('link[rel="icon"]')?.href);
            console.log('页面标题:', document.title);
            console.log('页面描述:', document.querySelector('meta[name="description"]')?.content);
        });
    </script>
</body>
</html>