<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯•åˆ†ç±»ä¿å­˜åŠŸèƒ½</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            background: #f5f5f5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #007acc;
        }
        .success {
            background: #e8f5e8;
            border-left-color: #28a745;
        }
        .info {
            background: #e3f2fd;
            border-left-color: #2196f3;
        }
        code {
            background: #f1f1f1;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Consolas', monospace;
        }
        pre {
            background: #f8f8f8;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
        }
        .highlight {
            background: #fff3cd;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ffeaa7;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ åˆ†ç±»ä¿å­˜åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-section success">
        <h2>âœ… ä¿®æ”¹å®Œæˆ</h2>
        <p>å·²æˆåŠŸä¿®æ”¹ PopupApp.tsx ä¸­çš„åˆ†ç±»ä¿å­˜é€»è¾‘ï¼Œç°åœ¨ä¿å­˜äºŒçº§åˆ†ç±»æ—¶ä¼šåŒæ—¶ä¿å­˜çˆ¶åˆ†ç±» IDã€‚</p>
    </div>

    <div class="test-section info">
        <h2>ğŸ“‹ ä¿®æ”¹å†…å®¹æ¦‚è¿°</h2>
        
        <h3>1. handleCategorySelect å‡½æ•°</h3>
        <p>ä¿®æ”¹äº†ç”¨æˆ·ä¸»åŠ¨é€‰æ‹©åˆ†ç±»æ—¶çš„ä¿å­˜é€»è¾‘ï¼š</p>
        <ul>
            <li>é€‰æ‹©äºŒçº§åˆ†ç±»æ—¶ï¼šä¿å­˜äºŒçº§åˆ†ç±» ID å’Œçˆ¶åˆ†ç±» ID</li>
            <li>é€‰æ‹©ä¸€çº§åˆ†ç±»æ—¶ï¼šåªä¿å­˜ä¸€çº§åˆ†ç±» IDï¼Œå¹¶æ¸…é™¤ä¹‹å‰çš„çˆ¶åˆ†ç±» ID</li>
        </ul>

        <h3>2. handleQuickAdd å‡½æ•°</h3>
        <p>ä¿®æ”¹äº†æˆåŠŸæ·»åŠ ä¹¦ç­¾åçš„åˆ†ç±»ä¿å­˜é€»è¾‘ï¼š</p>
        <ul>
            <li>å¦‚æœä½¿ç”¨äº†äºŒçº§åˆ†ç±»ï¼šåŒæ—¶ä¿å­˜äºŒçº§åˆ†ç±» ID å’Œçˆ¶åˆ†ç±» ID</li>
            <li>å¦‚æœä½¿ç”¨äº†ä¸€çº§åˆ†ç±»ï¼šåªä¿å­˜ä¸€çº§åˆ†ç±» ID</li>
        </ul>

        <h3>3. restoreLastSelectedCategory å‡½æ•°</h3>
        <p>ä¿®æ”¹äº†æ¢å¤ä¸Šæ¬¡é€‰æ‹©åˆ†ç±»çš„é€»è¾‘ï¼š</p>
        <ul>
            <li>åŒæ—¶è¯»å–ä¸Šæ¬¡é€‰æ‹©çš„åˆ†ç±» ID å’Œçˆ¶åˆ†ç±» ID</li>
            <li>åœ¨æ—¥å¿—ä¸­æ˜¾ç¤ºçˆ¶åˆ†ç±»ä¿¡æ¯</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>ğŸ—‚ï¸ å­˜å‚¨ç»“æ„</h2>
        <p>ç°åœ¨çš„å­˜å‚¨ç»“æ„åŒ…å«ä¸¤ä¸ªé”®ï¼š</p>
        <pre><code>// ä¸€çº§åˆ†ç±»é€‰æ‹©
{
  "lastSelectedCategory_instanceId": "category-123"
}

// äºŒçº§åˆ†ç±»é€‰æ‹©
{
  "lastSelectedCategory_instanceId": "subcategory-456",
  "lastSelectedParentCategory_instanceId": "category-123"
}</code></pre>
    </div>

    <div class="test-section">
        <h2>ğŸ”„ å·¥ä½œæµç¨‹</h2>
        
        <h3>é€‰æ‹©äºŒçº§åˆ†ç±»æ—¶ï¼š</h3>
        <ol>
            <li>ç”¨æˆ·ç‚¹å‡»äºŒçº§åˆ†ç±»</li>
            <li><code>handleCategorySelect</code> è¢«è°ƒç”¨ï¼Œä¼ å…¥äºŒçº§åˆ†ç±» ID</li>
            <li>å‡½æ•°è¯†åˆ«è¿™æ˜¯äºŒçº§åˆ†ç±»ï¼Œè®¾ç½®ï¼š
                <ul>
                    <li><code>selectedCategoryId</code> = çˆ¶åˆ†ç±» ID</li>
                    <li><code>selectedSubCategoryId</code> = äºŒçº§åˆ†ç±» ID</li>
                </ul>
            </li>
            <li>ä¿å­˜åˆ°å­˜å‚¨ï¼š
                <ul>
                    <li><code>lastSelectedCategory_instanceId</code> = äºŒçº§åˆ†ç±» ID</li>
                    <li><code>lastSelectedParentCategory_instanceId</code> = çˆ¶åˆ†ç±» ID</li>
                </ul>
            </li>
        </ol>

        <h3>æ·»åŠ ä¹¦ç­¾æˆåŠŸåï¼š</h3>
        <ol>
            <li><code>handleQuickAdd</code> è°ƒç”¨ API æ·»åŠ ä¹¦ç­¾</li>
            <li>API è°ƒç”¨æˆåŠŸåï¼Œå†æ¬¡ä¿å­˜åˆ†ç±»é€‰æ‹©</li>
            <li>å¦‚æœä½¿ç”¨äº†äºŒçº§åˆ†ç±»ï¼ŒåŒæ—¶ä¿å­˜äºŒçº§åˆ†ç±» ID å’Œçˆ¶åˆ†ç±» ID</li>
        </ol>

        <h3>ä¸‹æ¬¡æ‰“å¼€æ—¶ï¼š</h3>
        <ol>
            <li><code>restoreLastSelectedCategory</code> è¯»å–å­˜å‚¨çš„åˆ†ç±»ä¿¡æ¯</li>
            <li>å¦‚æœæœ‰çˆ¶åˆ†ç±» IDï¼Œè¯´æ˜ä¸Šæ¬¡é€‰æ‹©çš„æ˜¯äºŒçº§åˆ†ç±»</li>
            <li>è°ƒç”¨ <code>handleCategorySelect</code> æ¢å¤é€‰æ‹©çŠ¶æ€</li>
        </ol>
    </div>

    <div class="test-section highlight">
        <h2>ğŸ§ª æµ‹è¯•å»ºè®®</h2>
        <ol>
            <li><strong>é€‰æ‹©ä¸€çº§åˆ†ç±»</strong>ï¼šéªŒè¯åªä¿å­˜ä¸€çº§åˆ†ç±» ID</li>
            <li><strong>é€‰æ‹©äºŒçº§åˆ†ç±»</strong>ï¼šéªŒè¯åŒæ—¶ä¿å­˜äºŒçº§åˆ†ç±» ID å’Œçˆ¶åˆ†ç±» ID</li>
            <li><strong>æ·»åŠ ä¹¦ç­¾</strong>ï¼šéªŒè¯æˆåŠŸåæ­£ç¡®ä¿å­˜ä½¿ç”¨çš„åˆ†ç±»</li>
            <li><strong>é‡æ–°æ‰“å¼€</strong>ï¼šéªŒè¯èƒ½æ­£ç¡®æ¢å¤ä¸Šæ¬¡çš„åˆ†ç±»é€‰æ‹©</li>
            <li><strong>åˆ‡æ¢åˆ†ç±»</strong>ï¼šéªŒè¯ä»äºŒçº§åˆ†ç±»åˆ‡æ¢åˆ°ä¸€çº§åˆ†ç±»æ—¶æ¸…é™¤çˆ¶åˆ†ç±» ID</li>
        </ol>
    </div>

    <div class="test-section info">
        <h2>ğŸ“ å…³é”®æ”¹è¿›ç‚¹</h2>
        <ul>
            <li>âœ… ä¿å­˜äºŒçº§åˆ†ç±»æ—¶åŒæ—¶ä¿å­˜çˆ¶åˆ†ç±» ID</li>
            <li>âœ… é€‰æ‹©ä¸€çº§åˆ†ç±»æ—¶æ¸…é™¤ä¹‹å‰çš„çˆ¶åˆ†ç±» ID</li>
            <li>âœ… æ¢å¤åˆ†ç±»é€‰æ‹©æ—¶è¯»å–çˆ¶åˆ†ç±»ä¿¡æ¯</li>
            <li>âœ… æ·»åŠ è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºä¾¿äºè°ƒè¯•</li>
            <li>âœ… ä¿æŒå‘åå…¼å®¹æ€§</li>
        </ul>
    </div>

    <script>
        console.log('åˆ†ç±»ä¿å­˜åŠŸèƒ½æµ‹è¯•é¡µé¢å·²åŠ è½½');
        console.log('è¯·åœ¨æµè§ˆå™¨æ‰©å±•ä¸­æµ‹è¯•ä»¥ä¸‹åœºæ™¯ï¼š');
        console.log('1. é€‰æ‹©ä¸€çº§åˆ†ç±»å¹¶æ·»åŠ ä¹¦ç­¾');
        console.log('2. é€‰æ‹©äºŒçº§åˆ†ç±»å¹¶æ·»åŠ ä¹¦ç­¾');
        console.log('3. é‡æ–°æ‰“å¼€æ‰©å±•éªŒè¯åˆ†ç±»é€‰æ‹©æ¢å¤');
        console.log('4. åœ¨ä¸åŒåˆ†ç±»é—´åˆ‡æ¢');
    </script>
</body>
</html>