# NavSphere 浏览器扩展安装指南

## 🚀 快速开始

### 1. 构建扩展

```bash
# 克隆或下载项目代码
cd navsphere-extension

# 安装依赖
npm install

# 构建扩展
npm run build
```

构建完成后，会在 `dist` 目录下生成扩展文件。

### 2. 加载扩展到浏览器

#### Chrome / Edge

1. 打开浏览器，访问 `chrome://extensions/`
2. 开启右上角的"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择项目的 `dist` 文件夹
5. 扩展加载成功！

#### Firefox

1. 打开浏览器，访问 `about:debugging`
2. 点击"此 Firefox"
3. 点击"临时载入附加组件"
4. 选择 `dist/manifest.json` 文件
5. 扩展加载成功！

### 3. 配置 NavSphere 实例

首次使用需要配置您的 NavSphere 实例：

1. 点击浏览器地址栏右侧的扩展图标
2. 点击"配置实例"按钮
3. 在设置页面中：
   - 输入实例名称（如：个人导航）
   - 输入 NavSphere 网站 URL（如：https://your-navsphere.vercel.app）
   - 点击"验证"按钮检查连接
   - 验证成功后点击"添加"

### 4. 开始使用

配置完成后，您可以：

- **右键菜单**：在任意网页右键，选择"添加到 NavSphere"
- **快捷键**：按 `Ctrl+Shift+A`（Mac 上是 `Cmd+Shift+A`）
- **扩展弹窗**：点击扩展图标手动添加

## 🔧 开发调试

### 开发模式

```bash
npm run dev
```

开发模式下会启动热重载，修改代码后扩展会自动更新。

### 重新加载扩展

修改代码后需要重新加载扩展：

1. 在 `chrome://extensions/` 页面找到 NavSphere 扩展
2. 点击刷新按钮（🔄）
3. 或者点击"移除"后重新"加载已解压的扩展程序"

### 调试方法

#### 调试弹窗（Popup）
1. 右键点击扩展图标
2. 选择"检查弹窗"
3. 打开开发者工具

#### 调试设置页面（Options）
1. 在扩展管理页面点击"详细信息"
2. 点击"扩展程序选项"
3. 按 F12 打开开发者工具

#### 调试后台脚本（Background）
1. 在扩展管理页面点击"检查视图：service worker"
2. 打开后台脚本的开发者工具

#### 调试内容脚本（Content Script）
1. 在任意网页按 F12 打开开发者工具
2. 在 Console 中可以看到内容脚本的日志

## 📝 测试功能

### 测试快速添加功能

1. 访问任意网页（如：https://github.com）
2. 右键选择"添加到 NavSphere"或按快捷键
3. 在弹窗中选择分类
4. 点击"添加"按钮
5. 查看 NavSphere 网站确认是否添加成功

### 测试多实例管理

1. 添加多个 NavSphere 实例
2. 在设置页面切换默认实例
3. 测试快速添加是否使用正确的实例

## 🐛 常见问题

### 扩展无法加载
- 检查 `dist` 目录是否存在且包含 `manifest.json`
- 确保已运行 `npm run build`
- 尝试重新构建：`rm -rf dist && npm run build`

### 验证实例失败
- 检查 NavSphere 网站 URL 是否正确
- 确保网站可以正常访问
- 检查是否存在跨域问题

### 快速添加失败
- 检查是否已配置实例
- 确认是否已通过认证
- 查看浏览器控制台的错误信息

### 获取帮助

如果遇到问题：
1. 查看浏览器控制台的错误日志
2. 检查扩展的后台脚本日志
3. 在 GitHub 仓库提交 Issue

## 🎯 下一步

- [ ] 实现 GitHub OAuth 认证
- [ ] 开发书签同步功能
- [ ] 添加 Firefox 完整支持
- [ ] 发布到浏览器应用商店